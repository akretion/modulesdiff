#!/usr/bin/env bash
(git diff $1 --name-only | fgrep -v \.po | fgrep -v \.css | fgrep -v \.sass | fgrep -v \.js | grep '.*/.*' | fgrep -v \.py | uniq -u | sed "s/^openerp\/addons\//addons\//g" | grep -v "openerp/[a-z]*/" | sed "s/^addons\///g" | sed "s/^modules\///g" | sed -e 's/\//\nxxxxxxxx/g' | fgrep -v xxxxxxxx; git diff $1 -w -b -G 'class |fields\.|constraint|_inherit|store=|states=|compute=|track_visibility=|digits=|ondelete=' --name-only | fgrep -v \.po | fgrep -v \.css | fgrep -v \.sass | fgrep -v \.js | grep '.*/.*' | uniq -u | sed "s/^openerp\/addons\//addons\//g" | grep -v "openerp/[a-z]*/" | sed "s/^addons\///g" | sed "s/^modules\///g" | sed -e 's/\//\nxxxxxxxx/g' | fgrep -v xxxxxxxx) | uniq -u | tr "\\n" "," | sed "s/,$//g" && echo ""
